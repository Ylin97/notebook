# eval和system函数的区别

### ✅ **相似点**

- **都能执行字符串形式的命令**。
- `eval` 在 Shell 中，`system()` 在 C 中，都是“字符串 → 命令 → 执行”。

例如：

```c
system("ls -l");
```

等价于在 Shell 里执行：

```bash
eval "ls -l"
```

------

### ✅ **区别**

| 特性                 | `eval` (Shell 内置)                     | `system()` (C 标准库)          |
| -------------------- | --------------------------------------- | ------------------------------ |
| **执行环境**         | 当前 Shell 进程                         | 新的子进程（/bin/sh）          |
| **对环境变量的影响** | **会修改当前 Shell 的环境变量**         | **不会影响父进程环境**         |
| **用途**             | 解析并执行 Shell 代码（多用于动态命令） | 调用外部命令（多用于程序逻辑） |
| **性能**             | 无需创建新进程                          | 创建子进程，开销更大           |
| **安全风险**         | 命令注入                                | 也有命令注入风险               |

------

#### **例子对比**

**Shell：**

```bash
eval "export MYVAR=123"
echo $MYVAR   # 输出 123
```

`eval` 会影响当前 Shell 的变量。

**C 语言：**

```c
system("export MYVAR=123");
printf("%s\n", getenv("MYVAR"));  // 仍然是 NULL
```

`system()` 的 `export` 只在子 Shell 生效，不会影响当前进程。

------

### ✅ **总结**

- **eval**：像 Shell 里的“动态解释器”，可以修改当前 Shell 状态。
- **system()**：启动一个新的 Shell 执行命令，执行后状态不会回传。

---

> PS: `eval`是 evaluate 的缩写。