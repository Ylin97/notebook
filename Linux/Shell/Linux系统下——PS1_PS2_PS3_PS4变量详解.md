# Linux系统下——PS1_PS2_PS3_PS4变量详解

## **一、四个提示符变量概览**

| 变量    | 作用说明                                    | 默认值         | 场景                |
| ------- | ------------------------------------------- | -------------- | ------------------- |
| **PS1** | **主提示符**（Primary Prompt）              | `[\u@\h \W]\$` | 命令行输入时显示    |
| **PS2** | **续行提示符**（Secondary Prompt）          | `>`            | 多行命令换行时显示  |
| **PS3** | **`select` 提示符**                         | `#? `          | `select` 菜单时显示 |
| **PS4** | **调试提示符**（Debug Prompt，`set -x` 时） | `+`            | 每行命令执行时输出  |

------

## **二、PS1 变量详解**

### **1. 常用字符（基础部分）**

| 字符 | 含义                                     |
| ---- | ---------------------------------------- |
| `\u` | 当前用户                                 |
| `\h` | 主机名（仅第一个点）                     |
| `\H` | 主机完整名                               |
| `\w` | 当前工作目录（完整路径，`~` 表示家目录） |
| `\W` | 当前目录名（仅最后一级）                 |
| `\$` | 提示符（普通用户 `$`，root 用户 `#`）    |
| `\!` | 历史命令编号（动态）                     |
| `\#` | 当前命令编号（会话内）                   |

------

### **2. PS1 可用参数（完整表）**

| 参数 | 含义                          |
| ---- | ----------------------------- |
| `\d` | 日期（Weekday Month Date）    |
| `\t` | 24 小时制时间（HH:MM:SS）     |
| `\T` | 12 小时制时间                 |
| `\A` | 24 小时制时间（HH:MM）        |
| `\@` | 12 小时制时间（AM/PM）        |
| `\s` | Shell 名称                    |
| `\v` | Bash 版本                     |
| `\V` | Bash 版本（含补丁）           |
| `\n` | 换行符                        |
| `\j` | 后台任务数                    |
| `\!` | 历史命令编号                  |
| `\#` | 当前命令编号                  |
| `\u` | 用户名                        |
| `\h` | 主机名（第一个点）            |
| `\H` | 主机完整名                    |
| `\w` | 当前路径                      |
| `\W` | 当前目录名                    |
| `\$` | `$`（普通用户）或 `#`（root） |

------

### **3. 彩色提示符（ANSI 转义码）**

**格式：**

```
\e[F;Bm
```

- **F** = 字体颜色代码（Foreground）
- **B** = 背景颜色代码（Background）
- `m` 表示颜色生效
- 恢复默认颜色：`\e[0m`

| 字体(F) | 背景(B) | 颜色   |
| ------- | ------- | ------ |
| 30      | 40      | 黑色   |
| 31      | 41      | 红色   |
| 32      | 42      | 绿色   |
| 33      | 43      | 黄色   |
| 34      | 44      | 蓝色   |
| 35      | 45      | 紫红色 |
| 36      | 46      | 青蓝色 |
| 37      | 47      | 白色   |

**文字样式代码：**

- `0` 默认
- `1` 加粗
- `4` 下划线
- `5` 闪烁
- `7` 反显
- `8` 隐藏

------

### **4. 彩色 PS1 示例**

```bash
# 用户名+主机名蓝色，时间黄色，路径绿色
PS1="\[\e[1;34m\]\u@\h \[\e[1;33m\]\A \[\e[1;32m\]\w\[\e[0m\] \$ "
```

显示效果：

```
kago@linux 10:32 /home/kago $
```

------

## **三、其他提示符变量用法示例**

### **1. PS2 – 续行提示符**

- **作用**：输入命令未完成（如使用 `\` 续行），显示 `PS2`
- **默认值**：`>`
- **示例**：

```bash
export PS2="continue-> "
echo "Hello \
continue-> World"
```

------

### **2. PS3 – select 提示符**

- **作用**：`select` 菜单时显示
- **示例**：

```bash
PS3="请选择一个选项: "
select fruit in 苹果 香蕉 橙子 退出; do
    echo "你选择了: $fruit"
    [ "$fruit" == "退出" ] && break
done
```

输出：

```
1) 苹果
2) 香蕉
3) 橙子
4) 退出
请选择一个选项:
```

------

### **3. PS4 – 调试提示符**

- **作用**：`set -x` 调试时，每行命令前加 `PS4`
- **默认值**：`+`
- **示例**：

```bash
export PS4='+DEBUG: '
set -x
echo "Hello"
date
```

输出：

```
+DEBUG: echo Hello
Hello
+DEBUG: date
Wed Sep 3 10:33:45 JST 2025
```

如果加上脚本名和行号：

```bash
export PS4='+$0:$LINENO: '
```

------

## **四、总结表（关键信息一览）**

| 变量    | 含义          | 默认值         | 示例用途                           |
| ------- | ------------- | -------------- | ---------------------------------- |
| **PS1** | 主提示符      | `[\u@\h \W]\$` | 显示用户、主机、时间、路径，加颜色 |
| **PS2** | 续行提示符    | `>`            | 多行命令换行时提示                 |
| **PS3** | select 提示符 | `#? `          | `select` 菜单选项提示              |
| **PS4** | 调试提示符    | `+`            | `set -x` 调试输出前缀              |

------

## **五、完整 `.bashrc` 自定义示例**

```bash
# 主提示符：蓝色用户名@主机，黄色时间，绿色路径
PS1="\[\e[1;34m\]\u@\h \[\e[1;33m\]\A \[\e[1;32m\]\w\[\e[0m\] \$ "

# 续行提示符
PS2="continue-> "

# select 提示符
PS3="请选择一个选项: "

# 调试提示符（显示脚本名和行号）
PS4='+$0:$LINENO: '
```

