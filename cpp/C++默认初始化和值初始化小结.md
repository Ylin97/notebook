# C++默认初始化和值初始化小结

在C++中，“默认初始化”和“值初始化”是两种不同的初始化方式，它们在对象创建时的行为有些不同。

### 1. 默认初始化（Default Initialization）

**默认初始化**指的是在创建对象时，编译器为该对象分配内存，但不对内存进行明确的初始化操作。这通常适用于未显式给定初始值的变量。

- **内置类型（如`int`、`float`等）**：默认初始化并不会给变量赋予任何值，它的内容是未定义的。因此，默认初始化后的内置类型变量可能包含垃圾值。

  ```cpp
  int x;  // 默认初始化，x的值是未定义的
  ```

- **类类型（如对象或指针）**：类类型对象会调用其默认构造函数（如果有的话）。如果没有提供默认构造函数，则会调用合成的构造函数。

  ```cpp
  class MyClass {
  public:
      int a;
      MyClass() : a(0) {}  // 默认构造函数
  };
  
  MyClass obj;  // 默认初始化，调用MyClass()构造函数
  ```

### 2. 值初始化（Value Initialization）

**值初始化**指的是对象在创建时被显式地初始化为其类型的零值或默认值。对于内置类型，这意味着将其初始化为0；对于类类型，这意味着调用默认构造函数。

- **内置类型**：值初始化会将变量初始化为零。

  ```cpp
  int x{};  // 值初始化，x的值是0
  ```

- **类类型**：如果类具有默认构造函数，则值初始化会调用该构造函数。如果类没有显式的默认构造函数，则会进行类似“默认初始化”的操作，即对象的成员将会被初始化为零值（如果是POD类型），否则会有未定义行为。

  ```cpp
  class MyClass {
  public:
      int a;
      MyClass() : a(0) {}  // 默认构造函数
  };
  
  MyClass obj{};  // 值初始化，调用MyClass()构造函数，a被初始化为0
  ```

### 区别总结：

| 特性     | 默认初始化 (Default Initialization) | 值初始化 (Value Initialization)      |
| -------- | ----------------------------------- | ------------------------------------ |
| 内置类型 | 未定义值（垃圾值）                  | 初始化为0                            |
| 类类型   | 调用默认构造函数（如果有）          | 调用默认构造函数，成员被初始化为零值 |
| 示例     | `int x;`                            | `int x{};`                           |

**简而言之**：

- **默认初始化**：内置类型不进行初始化，类类型调用默认构造函数。
- **值初始化**：将内置类型初始化为零，类类型则调用默认构造函数并将成员初始化为零值。