# C++类的静态成员知识小结

**类的静态成员**是指在 C++ 类中，使用 `static` 关键字声明的成员变量或成员函数。这类成员在类级别上共享，而不是在每个对象实例中独立存在。静态成员对于类的所有实例是**共享的**，并且它们不依赖于某个具体的对象。以下是关于类的静态成员的详细总结：

---

### 1. **静态成员变量**

- **定义**：静态成员变量在类中声明，但它的存储空间只分配一次，所有对象共享同一个静态成员变量。
  
- **声明与定义**：
  - 静态成员变量需要在类的外部定义，虽然它是在类的声明中声明的，但它并不属于任何一个对象实例。
  
  **示例**：
  ```cpp
  class MyClass {
  public:
      static int count;  // 声明静态成员变量
  };
  
  // 在类外定义静态成员变量
  int MyClass::count = 0;
  ```

- **特点**：
  
  - 所有对象共享同一个静态成员变量，无论创建了多少个对象，该变量的值都是共享的。
  - 静态成员变量在程序生命周期内始终存在，直到程序结束。
  - 静态成员可以在没有创建对象实例的情况下通过类名直接访问。
  
  **示例**：
  ```cpp
  MyClass::count = 10;  // 通过类名访问静态成员变量
  ```

### 2. **静态成员函数**

- **定义**：静态成员函数是在类级别上定义的函数，它不能访问类的非静态成员变量或非静态成员函数，因为它不依赖于某个对象实例。

- **声明与定义**：
  - 在类内部声明时用 `static` 关键字标记，定义时不需要再次加 `static` 关键字。

  **示例**：
  ```cpp
  class MyClass {
  public:
      static void printCount() {
          std::cout << "Count: " << count << std::endl;
      }
  };
  ```

- **特点**：
  - 静态成员函数只能访问静态成员变量或其他静态成员函数。
  - 可以通过类名直接调用静态成员函数，而无需创建对象。
  
  **示例**：
  ```cpp
  MyClass::printCount();  // 通过类名调用静态成员函数
  
  MyClass obj;
  ```

### 3. **静态成员的用途**

- **共享数据**：静态成员非常适合存储共享的类级别信息。例如，静态成员变量可以用于跟踪类的对象实例数。
  
- **无需实例化访问类的功能**：静态成员函数允许在没有对象实例的情况下调用类的某些功能。它们常用于提供与类相关的全局行为（如工厂模式中的创建函数）。

### 4. **静态成员的注意事项**

- **无法访问非静态成员**：静态成员函数不能访问类的非静态成员（包括成员变量和成员函数），因为静态成员函数不属于任何对象实例，不能访问特定对象的状态。
  - **静态成员函数的定义**：由于不包含`this`指针，所以不能将静态成员函数声明成`const`，而且也不能在它内部使用`this`指针。	
  
- **静态成员变量的定义**：静态成员变量必须在类外部定义一次。类内的声明只是声明，不会分配内存。静态成员变量的定义通常放在类的实现文件（如 `.cpp` 文件）中。

- **访问方式**：既可以通过类名直接访问，也可以通过类的对象、引用和指针访问。

- **存储期**：静态成员变量属于**类的整个生命周期**，它们的生命周期从程序开始到程序结束。

### 5. **示例：静态成员变量与静态成员函数**

```cpp
#include <iostream>

class Counter {
public:
    static int count;  // 静态成员变量声明

    // 构造函数
    Counter() {
        count++;
    }

    // 静态成员函数
    static void showCount() {
        std::cout << "Object count: " << count << std::endl;
    }
};

// 在类外定义静态成员变量
int Counter::count = 0;

int main() {
    Counter c1, c2, c3;

    // 通过类名访问静态成员变量和静态成员函数
    Counter::showCount();

    return 0;
}
```

### 输出：
```
Object count: 3
```

### 总结：
- 静态成员（变量和函数）是类级别的，不属于具体的对象。
- 静态成员变量需要在类外定义，并且可以通过类名访问，无需实例化对象。
- 静态成员函数只能访问静态成员，不能访问非静态成员。
- 静态成员通常用于存储类的全局数据或者提供与对象无关的功能。

这些特性使得静态成员在共享类级别的信息和提供类相关的全局行为时非常有用。